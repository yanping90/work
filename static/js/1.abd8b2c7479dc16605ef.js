webpackJsonp([1],{FDnG:function(e,t){},IbwH:function(e,t,i){"use strict";var n=i("14gb"),a={name:"TabTit",props:["item","index","selected","deleteVisible","repeatable"],data:function(){return{isHnputHover:!1,note:"",editableTit:!1}},computed:{deletable:function(){return this.item.deleted&&""===this.item.filename},editable:function(){return this.item.oldname!==this.item.filename},addable:function(){return""===this.item.oldname}},watch:{repeatable:function(){this.repeatable&&this.$message.error("文件名字不能重复")}},mounted:function(){var e=this;n.a.$on("showEditName",function(){e.editableTit=!1})},methods:{showEditTit:function(){this.editableTit=!0,this.changeWidth()},deleteFiles:function(e){this.$set(this.item,"deleted",!0),this.$set(this.item,"filename",""),n.a.$emit("onDeleteFiles",e)},changeTab:function(e){this.$emit("onchangeTab",e)},onNameChanged:function(){this.editableTit=!1,this.$set(this.item,"editable",!0),n.a.$emit("onNameChangedHandle",{deletable:this.deletable,editable:this.editable}),n.a.$emit("repeatFilename",this.item.filename)},changeWidth:function(){this.$refs.inputWidth.style.width=this.$refs.widthName.clientWidth+20+"px"}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"tabTit",class:{hide:e.item.deleted,active:e.selected===e.index}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.editableTit,expression:"!editableTit"}],staticClass:"fileName",on:{click:function(t){e.changeTab(e.index)},dblclick:e.showEditTit}},[e._v(e._s(e.item.filename))]),e._v(" "),i("span",{ref:"widthName",staticClass:"nameWidth"},[e._v(e._s(e.item.filename))]),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:e.editableTit,expression:"editableTit"},{name:"model",rawName:"v-model",value:e.item.filename,expression:"item.filename"}],ref:"inputWidth",staticClass:"inputHover",attrs:{type:"text"},domProps:{value:e.item.filename},on:{change:e.onNameChanged,keyup:e.changeWidth,input:function(t){t.target.composing||e.$set(e.item,"filename",t.target.value)}}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.deleteVisible,expression:"deleteVisible"}],staticClass:"el-icon-delete",on:{click:function(t){e.deleteFiles(e.index)}}})])},staticRenderFns:[]},l=i("VU/8")(a,s,!1,function(e){i("arOV")},"data-v-50bb3028",null);t.a=l.exports},a2K3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("edHf"),a=i("14gb"),s=i("IbwH"),l=i("bUSi"),o={name:"AddGist",components:{TabTit:s.a,File:l.a},data:function(){return{files:[],description:"",note:"",selected:0,current:0,radioIndex:"1",newFileIndex:2,repeatable:!1,disabled:!1,addable:!0}},computed:{hideDeleteIcon:function(){return this.files&&1===this.files.length},deleteVisible:function(){return this.files.filter(function(e){return!e.deleted}).length>1}},mounted:function(){var e=this;a.a.$on("hideGistDetails",function(){e.hideLoad=!0,e.hideDetails=!0}),this.files.push({filename:"file_1",content:""}),a.a.$on("repeatFilename",function(t){e.files.filter(function(e){return e.filename===t}).length>1&&(e.repeatable=!0)}),a.a.$on("onDeleteFiles",function(t){for(var i=e.files,n=0;n<i.length;n++)if(void 0===i[n].deleted){e.selected=n;break}})},methods:{addFile:function(){this.addable=!0;var e="file_"+this.newFileIndex++;this.files.push({filename:e,content:""}),this.selected=this.files.length-1},onChangeTabHandle:function(e){this.selected=e},onChangeTab:function(e){this.selected=e},deleteFile:function(e){e>0&&this.files.splice(e,1)},changeDesc:function(){""!==this.description?this.note="":this.note="详情描述不能为空"},saveGist:function(){var e=this;if(""!==this.description){this.note="";var t={};"1"===this.radioIndex?t.public=!0:t.public=!1,t.description=this.description,t.files={},this.files.filter(function(e){return!e.deleted}).forEach(function(e){t.files[e.filename]={content:e.content}}),n.a.post("/gists",t).then(function(t){e.selected=0,e.addable=!1,a.a.$emit("changeEditContent"),a.a.$emit("addListGist",{id:t.data.id,description:t.data.description,public:t.data.public}),e.open(),e.$router.push({path:"/gists/gist",query:{id:t.data.id}})}).catch()}else this.note="详情描述不能为空"},open:function(){this.$message({message:"恭喜你，添加成功",type:"success"})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addForm"},[i("div",[i("el-input",{attrs:{type:"textarea",placeholder:"请输入详情描述",autosize:""},on:{change:e.changeDesc},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e._v(" "),i("span",[e._v(e._s(e.note))])],1),e._v(" "),i("div",{staticClass:"height20"}),e._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:e.radioIndex,callback:function(t){e.radioIndex=t},expression:"radioIndex"}},[e._v("public")]),e._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:e.radioIndex,callback:function(t){e.radioIndex=t},expression:"radioIndex"}},[e._v("secret")]),e._v(" "),i("div",{staticClass:"height20"}),e._v(" "),i("div",{staticClass:"tab-tit clear"},[e._l(e.files,function(t,n){return i("TabTit",{key:n,staticClass:"fl",attrs:{item:t,index:n,selected:e.selected,deleteVisible:e.deleteVisible,repeatable:e.repeatable},on:{onchangeTab:function(t){e.onChangeTabHandle(n)}}})}),e._v(" "),i("span",{staticClass:"gistAdd fl"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addFile}})])],2),e._v(" "),e._l(e.files,function(t,n){return i("File",{directives:[{name:"show",rawName:"v-show",value:e.selected===n,expression:"selected === index"}],key:n,attrs:{item:t,index:n}})}),e._v(" "),i("div",{staticClass:"line20"}),e._v(" "),i("div",{staticClass:"btn"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addable,expression:"addable"}],attrs:{type:"primary",size:"medium",disabled:e.disabled},on:{click:e.saveGist}},[e._v("保存\n    ")])],1)],2)},staticRenderFns:[]},c=i("VU/8")(o,d,!1,function(e){i("FDnG")},"data-v-5ad9701b",null);t.default=c.exports},arOV:function(e,t){},bUSi:function(e,t,i){"use strict";var n=i("14gb"),a={name:"File",props:["item","index"],data:function(){return{editContent:!1}},watch:{"item.content":function(){Prism.highlightAll()}},computed:{highlightedContent:function(){if(this.item.content){if(!this.item.language)return this.item.content;var e=this.item.language.toLowerCase();try{return Prism.highlight(this.item.content,Prism.languages[e],e)}catch(e){return this.item.content}}}},mounted:function(){var e=this;this.$refs.contentHeight.$el.children[0].style.border="1px solid #dcdfe6",this.item.content||(this.editContent=!0),n.a.$on("changeEditContent",function(){e.editContent=!1}),n.a.$on("changeContent",function(){e.item.content||(e.editContent=!0)}),n.a.$on("showFileDetail",function(){e.editContent=!1})},methods:{onEditContent:function(){this.editContent=!0,n.a.$emit("changeSave")},contentChanged:function(e){this.editContent=!0,this.$set(this.item,"editable",!0),n.a.$emit("onContentChanged",e)}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preContent"},[i("pre",{directives:[{name:"show",rawName:"v-show",value:!e.editContent,expression:"!editContent"}],on:{dblclick:e.onEditContent}},[e._v("      "),i("div",{staticClass:"fileContent",domProps:{innerHTML:e._s(e.highlightedContent)}}),e._v("\n    ")]),e._v(" "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.editContent,expression:"editContent"}],ref:"contentHeight",attrs:{type:"textarea",autosize:{minRows:20},placeholder:"请输入文件内容"},on:{change:function(t){e.contentChanged(e.index)}},model:{value:e.item.content,callback:function(t){e.$set(e.item,"content",t)},expression:"item.content"}})],1)},staticRenderFns:[]},l=i("VU/8")(a,s,!1,function(e){i("pAsz")},"data-v-b9887a2a",null);t.a=l.exports},pAsz:function(e,t){}});