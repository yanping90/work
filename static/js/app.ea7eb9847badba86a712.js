webpackJsonp([1],{"7w/U":function(t,e){},"E+Bh":function(t,e){},"GV+B":function(t,e){},IPm2:function(t,e){},Manj:function(t,e){},N6nI:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("OAwv"),a=i.n(s),o=new n.default({}),l=i("mtWM"),r=i.n(l),c=r.a.create({baseURL:"https://api.github.com",timeout:1e4});c.interceptors.request.use(function(t){return t.headers.Authorization="token "+localStorage.getItem("token"),t}),c.interceptors.response.use(function(t){return console.log(t),t},function(t){});var d=c,u={name:"UserBar",data:function(){return{userName:"",photo:"",hideUserBar:!0}},mounted:function(){o.$on("gotAccessToken",this.loadUser)},methods:{userExit:function(){this.hideUserBar=!0,this.$router.push({path:"/"}),o.$emit("removeToken")},loadUser:function(){var t=this;d.get("/user").then(function(e){console.log(e),t.hideUserBar=!1,t.userName=e.data.login,t.photo=e.data.avatar_url}).catch()}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tit",class:{hide:t.hideUserBar}},[i("span",[t._v("\n    你好,"),i("b",[t._v(t._s(t.userName))]),t._v(" "),i("span",{staticClass:"photoImg"},[i("img",{attrs:{src:t.photo}})]),t._v("\n    欢迎来到Gist！")]),t._v(" "),i("span",{staticClass:"quit"},[i("a",{on:{click:t.userExit}},[t._v("退出")])])])},staticRenderFns:[]};var f=i("VU/8")(u,h,!1,function(t){i("fk4z")},"data-v-3eef2305",null).exports,m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{loading:!0,hide:this.hideLoad}},[e("i",{staticClass:"el-icon-loading"}),this._v(" "),e("span",[this._v("页面加载中")])])},staticRenderFns:[]};var p=i("VU/8")({name:"Load",props:["hideLoad"],data:function(){return{}}},m,!1,function(t){i("wRHa")},"data-v-5559ee1c",null).exports,v={name:"App",components:{UserBar:f,Load:p},data:function(){return{loginUrl:"https://github.com/login/oauth/authorize?client_id=d327e486430e4b05f07b&scope=gist,user&redirect_uri=https://joyfunphp.herokuapp.com/github/oauth/gists",token:"",queryObj:{}}},computed:{hideLogin:function(){return""!==this.token||void 0!==this.queryObj.code},hideLoad:function(){return""!==this.token||void 0===this.queryObj.code}},mounted:function(){var t=this;o.$on("removeToken",function(){localStorage.removeItem("token"),t.token="",t.queryObj={}}),null===localStorage.getItem("token")?this.token="":""!==localStorage.getItem("token")&&(o.$emit("gotAccessToken"),this.token=localStorage.getItem("token"),this.$router.push("/gists")),this.queryObj=a.a.parse(location.search),void 0!==this.queryObj.code&&http.get("https://joyfunphp.herokuapp.com/github/access/",{params:{client_id:"d327e486430e4b05f07b",code:this.queryObj.code}}).then(function(e){e.data.access_token?(localStorage.setItem("token",e.data.access_token),t.token=e.data.access_token,t.$router.push("gists"),o.$emit("gotAccessToken")):alert("code过期")}).catch()}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("UserBar"),this._v(" "),e("div",{class:{githubBtn:!0,hide:this.hideLogin}},[e("a",{attrs:{href:this.loginUrl}},[this._v("\n      使用github帐号登录\n    ")])]),this._v(" "),e("Load",{attrs:{hideLoad:this.hideLoad}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var _=i("VU/8")(v,g,!1,function(t){i("E+Bh")},null,null).exports,b=i("/ocq"),C=i("NYxO"),k={name:"File",props:["files","file","index"],data:function(){return{desContent:"请输入content",desFilename:"请输入文件名",note:""}},watch:{"file.filename":function(t){this.files.filter(function(e){return e.filename===t}).length>1?this.note="文件名重复，请重复填写":this.note="",console.log(this.files)}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-input",{attrs:{placeholder:t.desFilename},model:{value:t.file.filename,callback:function(e){t.$set(t.file,"filename",e)},expression:"file.filename"}}),t._v(" "),i("span",{staticClass:"note"},[t._v(t._s(t.note))]),i("br"),t._v(" "),i("el-input",{attrs:{type:"textarea",placeholder:t.desContent},model:{value:t.file.content,callback:function(e){t.$set(t.file,"content",e)},expression:"file.content"}})],1)},staticRenderFns:[]};var w=i("VU/8")(k,x,!1,function(t){i("iD37")},"data-v-c7d4e970",null).exports,y={render:function(){var t=this.$createElement;return(this._self._c||t)("el-button",{attrs:{size:"mini"},on:{click:this.addFile}},[this._v("添加文件")])},staticRenderFns:[]};var $=i("VU/8")({name:"addFilename",props:["files"],data:function(){return{filename:"",content:""}},methods:{addFile:function(){this.files.push({filename:this.filename,content:this.content})}}},y,!1,function(t){i("O/8J")},"data-v-7fe6e450",null).exports,G={name:"Add",components:{File:w,AddFilename:$},data:function(){return{form:{desPlace:"请输入description",public:"true",description:"",filename:"",content:"",note:""},ps:["true","false"],isDisabled:!1,files:[]}},watch:{"form.description":function(t,e){0===t.length?this.form.note="详情描述不能为空":this.form.note=""}},methods:{addGist:function(){var t=this;if(0!==this.form.description.length){this.form.note="";var e={description:this.form.description,public:this.form.public};console.log(e),e.files={};for(var i=0;i<this.files.length;i++){var n=this.files[i].filename;e.files[n]={content:this.files[i].content}}r.a.post("https://api.github.com/gists",e,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){console.log(e),t.isDisabled=!0,window.confirm("创建成功")}).catch()}else this.form.note="详情描述不能为空"}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comWidth"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"详情描述"}},[i("el-input",{attrs:{placeholder:t.form.desPlace},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t._v(" "),i("span",{staticClass:"note"},[t._v(t._s(t.form.note))])],1),t._v(" "),i("el-form-item",{attrs:{label:"是否公共"}},[i("el-select",{model:{value:t.form.public,callback:function(e){t.$set(t.form,"public",e)},expression:"form.public"}},t._l(t.ps,function(t){return i("el-option",{key:t,attrs:{value:t}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"文件名称"}},[t._l(t.files,function(e,n){return i("File",{key:n,attrs:{file:e,files:t.files,index:n}})}),t._v(" "),i("AddFilename",{attrs:{files:t.files}})],2),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"medium",disabled:t.isDisabled},on:{click:t.addGist}},[t._v("立即创建")]),t._v(" "),i("el-button",{staticClass:"returnGist",attrs:{size:"medium"}},[i("router-link",{attrs:{to:"/read"}},[t._v("返回")])],1)],1)],1)],1)},staticRenderFns:[]};var F=i("VU/8")(G,R,!1,function(t){i("hlr8")},"data-v-ed482d6a",null).exports,I=i("vbIr"),T=i.n(I),E={name:"Read",data:function(){return{gists:[],links:{},pager:[],pageCount:1,selected:0,currentValue:"",getPage:function(t,e){var i=this;r.a.get(t,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){i.gists=t.data,i.links={};var n=i;t.headers.link.split(",").forEach(function(t){var e=t.match(/[<](.+)[>]; rel="(.+)"/);n.$set(n.links,e[2],e[1])}),"function"==typeof e&&e.call(n)}).catch()}}},filters:{time:function(){return T()("YYYYMMDD HH:mm:ss")}},mounted:function(){this.getPage("https://api.github.com/gists?page=1&per_page=4",function(){this.pageCount=parseInt(this.links.last.match(/\d/)[0]);for(var t=1;t<=this.pageCount;t++)this.pager.push({count:t});this.currentValue=2})},methods:{changePage:function(){if(this.currentValue=parseInt(this.currentValue),this.currentValue<=this.pageCount&&this.currentValue>=0){this.getPage("https://api.github.com/gists?page=num&per_page=4".replace(/num/,this.currentValue),function(){this.selected=this.currentValue-1})}else this.currentValue=this.pageCount;console.log(this.currentValue)},currentPage:function(t){this.getPage("https://api.github.com/gists?page=num&per_page=4".replace(/num/,t+1),function(){this.selected=t,t<this.pageCount-1?this.currentValue=t+2:this.currentValue=this.pageCount})},prevPage:function(){this.getPage(this.links.prev,function(){})},nextPage:function(){this.getPage(this.links.next,function(){})},deleteAll:function(){var t=this;this.multipleSelection.forEach(function(e){r.a.delete("https://api.github.com/gists/"+e.id,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(i){t.gists=t.gists.filter(function(t){return t.id!==e.id})}).catch()})},deleteGist:function(t){var e=this,i=t.target.id;r.a.delete("https://api.github.com/gists/"+i,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){e.gists=e.gists.filter(function(t){return t.id!==i}),window.confirm("删除成功")}).catch()},handleSelectionChange:function(t){this.multipleSelection=t}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comWidth"},[i("div",{staticClass:"addLink"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:t.deleteAll}}),t._v(" "),i("router-link",{attrs:{to:"/add"}},[i("el-button",{attrs:{type:"primary",circle:""}},[i("i",{staticClass:"el-icon-circle-plus-outline"})])],1)],1),t._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.gists,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection"}}),t._v(" "),i("el-table-column",{attrs:{label:"id"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("time")(e.row.created_at)))]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"url",label:"链接地址",width:"500"}}),t._v(" "),i("el-table-column",{attrs:{prop:"description",label:"详情描述","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("router-link",{attrs:{to:{name:"Edit",query:{id:e.row.id}}}},[i("i",{staticClass:"el-icon-edit"})]),t._v(" "),i("i",{staticClass:"el-icon-delete",attrs:{id:e.row.id},on:{click:t.deleteGist}})]}}])})],1),t._v(" "),i("div",{staticClass:"page-box"},[i("button",{staticClass:"prevBtn",class:[{mouseDisabled:!this.links.hasOwnProperty("prev")},{nextBtn:!0}],attrs:{disabled:!this.links.hasOwnProperty("prev")},on:{click:t.prevPage}},[i("i",{staticClass:"el-icon-arrow-left"})]),t._v(" "),i("ul",{staticClass:"page"},t._l(t.pager,function(e,n){return i("li",{class:{active:t.selected===n},on:{click:function(e){t.currentPage(n)}}},[t._v(t._s(e.count))])})),t._v(" "),i("button",{class:[{mouseDisabled:!this.links.hasOwnProperty("next")},{nextBtn:!0}],attrs:{disabled:!this.links.hasOwnProperty("next")},on:{click:t.nextPage}},[i("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),i("span",{staticClass:"fl totalPage"},[t._v("共"+t._s(t.pageCount)+"页")]),t._v(" "),i("div",{staticClass:"jump"},[i("span",[t._v("跳至")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],attrs:{type:"text"},domProps:{value:t.currentValue},on:{input:function(e){e.target.composing||(t.currentValue=e.target.value)}}}),t._v(" "),i("span",[t._v("页")]),t._v(" "),i("button",{on:{click:function(e){t.changePage(t.currentValue)}}},[t._v("跳转")])])])],1)},staticRenderFns:[]};var L=i("VU/8")(E,S,!1,function(t){i("sPlM")},"data-v-1498ecde",null).exports,z=i("gRE1"),U=i.n(z),V={name:"fileEdit",props:["files","index","file","deleteItem"],components:{File:w},data:function(){return{}},methods:{deleteFile:function(t){console.log(t),void 0!==this.files[t].oldname&&(this.deleteItem.push(this.files[t].oldname),console.log(this.deleteItem)),this.files.splice(t,1)}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("File",{attrs:{file:t.file,files:t.files,index:t.index}}),t._v(" "),i("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(e){t.deleteFile(t.index)}}},[t._v("删除文件")])],1)},staticRenderFns:[]};var A={name:"Edit",components:{AddFilename:$,File:w,FileEdit:i("VU/8")(V,P,!1,function(t){i("7w/U")},"data-v-42f637b0",null).exports},data:function(){return{form:{description:""},ps:["true","false"],selectId:this.$route.query.id,files:[],oldName:[],deleteItem:[]}},mounted:function(){var t=this;r.a.get("https://api.github.com/gists/"+this.selectId,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){t.form.description=e.data.description,t.files=U()(e.data.files),t.files.forEach(function(t){t.oldname=t.filename}),console.log(t.files)}).catch()},methods:{editGist:function(){var t={};t.description=this.form.description,t.files={},this.files.forEach(function(e){void 0!==e.oldname?e.oldname!==e.filename?t.files[e.oldname]={filename:e.filename,content:e.content}:t.files[e.oldname]={content:e.content}:t.files[e.filename]={content:e.content}});var e=this;e.deleteItem.forEach(function(i){void 0===e.files.find(function(t){return t.filename===i})&&(t.files[i]=null)}),r.a.patch("https://api.github.com/gists/"+this.selectId,t,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){console.log(t),window.confirm("更新成功")}).catch(function(t){console.log(t)})}}},D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comWidth"},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"详情描述",prop:"description"}},[i("el-input",{attrs:{placeholder:t.form.desPlace},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"文件名称"}},[t._l(t.files,function(e,n){return i("FileEdit",{key:n,attrs:{file:e,files:t.files,index:n,deleteItem:t.deleteItem}})}),t._v(" "),i("AddFilename",{attrs:{files:t.files}})],2),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.editGist}},[t._v("更新内容")]),t._v(" "),i("el-button",{staticClass:"returnGist",attrs:{size:"medium"}},[i("router-link",{attrs:{to:"/read"}},[t._v("返回")])],1)],1)],1)],1)},staticRenderFns:[]};var B=i("VU/8")(A,D,!1,function(t){i("QVcd")},"data-v-6d908ded",null).exports,N={name:"Issue",data:function(){return{lists:[]}},mounted:function(){var t=this;r.a.get(" https://api.github.com/repos/yanping90/js/issues").then(function(e){console.log(e),t.lists=e.data}).catch()},filters:{time:function(){return T()("YYYY-MM-DD HH:mm")}}},O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comWidth"},[i("ul",{staticClass:"list"},t._l(t.lists,function(e){return i("li",[i("span",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),i("span",{staticClass:"time"},[t._v(t._s(t._f("time")(e.created_at)))]),t._v(" "),i("span",{staticClass:"edit"},[i("router-link",{attrs:{to:"issue/edit"}},[t._v("编辑")])],1)])}))])},staticRenderFns:[]};var q=i("VU/8")(N,O,!1,function(t){i("OLK2")},"data-v-2a1bb9d5",null).exports,H={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v(this._s(this.list.name))])},staticRenderFns:[]};var j={name:"Test",components:{Example:i("VU/8")({name:"Example",props:["list"],data:function(){return{}}},H,!1,function(t){i("rn6Z")},"data-v-79668038",null).exports},data:function(){return{size:"12",description:"",lists:[{name:"js",id:0,content:"JavaScript 是世界上最流行的脚本语言。JavaScript 是属于 web 的语言，它适用于 PC、笔记本电脑、平板电脑和移动电话。JavaScript 被设计为向 HTML 页面增加交互性。"},{name:"css",id:1,content:"HTML 指超文本标签语言。HTML 是通向 WEB 技术世界的钥匙。在 W3School 的 HTML 教程中，您将学习如何使用 HTML 来创建站点。"},{name:"HTML 教程",id:2,content:"在本教程中，你将学习如何使用 HTML 来创建站点。HTML 很容易学习！你会喜欢它的！"}]}},methods:{addGist:function(){r.a.post("https://api.github.com/gists",{description:this.description,files:{b:{content:"b"}}},{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){console.log(t.data)}).catch()},testBtn:function(t){console.log(t)},sizeFont:function(){this.size++,console.log(this.size)}}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",this._l(this.lists,function(t,i){return e("Example",{key:i,attrs:{list:t}})}))},staticRenderFns:[]};var W=i("VU/8")(j,M,!1,function(t){i("wNlq")},"data-v-78a55876",null).exports,Y=i("woOf"),J=i.n(Y),Z=i("fZjL"),K=i.n(Z),Q=i("W3Iv"),X=i.n(Q),tt={name:"Object",data:function(){return{data:""}},mounted:function(){var t={name:"lily",age:18,sex:"女"};console.log(t),this.data=X()(t),console.log(K()(t)),console.log(U()(t));for(var e in Array.prototype.set="",Array.prototype.get="",[1,2,3,4])console.log(e);var i={a:1,b:2,c:3},n=J()({c:1,d:10},i);console.log(n);var s=J()({},i);console.log(s);var a=[0,2,3,4,4,0,2];for(e=0;e<a.length;e++)a.indexOf(a[e])!=a.lastIndexOf(a[e])&&a.splice(e,1);console.log(a)}},et={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n  "+this._s(this.data)+"\n")])},staticRenderFns:[]};var it=i("VU/8")(tt,et,!1,function(t){i("Y6mS")},"data-v-c46c222e",null).exports,nt={render:function(){var t=this.$createElement;return(this._self._c||t)("a",{attrs:{href:"https://github.com/login/oauth/authorize?client_id=d327e486430e4b05f07b&scope=gist,user"}},[this._v("\n  使用github帐号登录\n")])},staticRenderFns:[]};var st=i("VU/8")({name:"Login",data:function(){return{}},mounted:function(){},methods:{}},nt,!1,function(t){i("hSnX")},"data-v-9fd6900a",null).exports,at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{hide:t.item.deleted}},[i("a",{class:{active:t.selected===t.index},on:{click:function(e){t.$emit("changeTab",t.index)}}},[t._v("\n    "+t._s(t.item.filename)+"\n  ")]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteIcon,expression:"showDeleteIcon"}],staticClass:"el-icon-close",on:{click:t.deleteFiles}})])},staticRenderFns:[]};var ot=i("VU/8")({name:"TabTit",props:["item","index","selected","hideReadGist"],data:function(){return{showDeleteIcon:""}},mounted:function(){this.showDeleteIcon=this.hideReadGist},watch:{hideReadGist:function(){this.showDeleteIcon=this.hideReadGist}},methods:{deleteFiles:function(){this.$set(this.item,"deleted",!0),this.$emit("disabledBtn")}}},at,!1,function(t){i("ZsaA")},"data-v-015c62c3",null).exports,lt={name:"TabContent",props:["files","item","index","id","addHandle"],data:function(){return{note:""}},watch:{"item.filename":function(t){var e=this.files.filter(function(t){return void 0!==t.deleted});this.addHandle&&(e=this.files),e.filter(function(e){return e.filename===t}).length>1?this.note="文件名重复，请重新填写":this.note=""}}},rt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",[i("div",{staticClass:"form-item"},[i("el-input",{attrs:{placeholder:"请输入文件名称"},on:{change:function(e){t.$emit("inputChange",t.index)}},model:{value:t.item.filename,callback:function(e){t.$set(t.item,"filename",e)},expression:"item.filename"}}),t._v("\n    "+t._s(t.note)+"\n  ")],1),t._v(" "),i("div",{staticClass:"form-item"},[i("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入文件内容"},on:{change:function(e){t.$emit("contentChange",t.index)}},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}})],1)])},staticRenderFns:[]};var ct=i("VU/8")(lt,rt,!1,function(t){i("xptx")},"data-v-51db711e",null).exports,dt={name:"Gist",props:["description","files","id","hideReadGist"],components:{TabTit:ot,TabContent:ct},data:function(){return{disabledSave:!1,selected:0,editDes:"",newContent:"",newFileIndex:1,data:{}}},watch:{description:function(){this.editDes=this.description}},methods:{onChangeTab:function(t){this.selected=t},onInputChange:function(t){this.$set(this.files[t],"nameChanged",!0),this.disabledSave=!1,console.log(t)},onContentChange:function(){this.disabledSave=!1},onDisableBtn:function(){this.disabledSave=!1},addFile:function(){var t="file_"+this.newFileIndex++;this.files.push({filename:t,content:this.newContent}),this.disabledSave=!1},onUpdateItem:function(){var t=this;if(this.data.description=this.editDes,0!==this.editDes.length){this.data.files={};var e=this;this.files.forEach(function(t){void 0!==t.oldname?(void 0!==t.nameChanged&&(e.data.files[t.oldname]={filename:t.filename,content:t.content}),void 0!==t.deleted&&(e.data.files[t.oldname]=null)):void 0!==t.nameChanged&&(e.data.files[t.filename]={content:t.content})}),console.log(this.data),r.a.patch("https://api.github.com/gists/"+this.id,this.data,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){console.log(e),t.open(),o.$emit("updateList",{id:t.id,files:e.data.files,description:t.editDes})}).catch(),this.disabledSave=!0,this.gistChanged=!1}else alert("详情描述不能为空")},open:function(){this.$message({message:"恭喜你，保存成功",type:"success"})}}},ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",{staticClass:"title"},[t._v("详情描述")]),t._v(" "),i("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.editDes,callback:function(e){t.editDes=e},expression:"editDes"}}),t._v(" "),i("h3",{staticClass:"title"},[t._v("文件列表")]),t._v(" "),i("div",{staticClass:"tab-tit clear"},t._l(t.files,function(e,n){return i("TabTit",{key:e.filename,staticClass:"fl",attrs:{item:e,index:n,selected:t.selected,hideReadGist:t.hideReadGist},on:{disabledBtn:t.onDisableBtn,changeTab:function(e){t.onChangeTab(n)}}})})),t._v(" "),t._l(t.files,function(e,n){return i("TabContent",{directives:[{name:"show",rawName:"v-show",value:t.selected===n,expression:"selected === index"}],key:n,attrs:{files:t.files,item:e,index:n,id:t.id},on:{inputChange:t.onInputChange,contentChange:t.onContentChange}})}),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary",size:"medium",disabled:t.disabledSave},on:{click:t.onUpdateItem}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"medium"},on:{click:t.addFile}},[t._v("添加")])],1)],2)},staticRenderFns:[]};var ht={name:"ReadGist",components:{TabTit:ot},props:["files","description","id","hideReadGist"],data:function(){return{hideTab:!0,activeName:"",selected:0}},methods:{onChangeTab:function(t){this.selected=t}}},ft={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("h3",{staticClass:"title"},[t._v("详情描述")]),t._v(" "),i("div",{staticClass:"form-item"},[t._v("\n      "+t._s(t.description)+"\n    ")])]),t._v(" "),i("h3",{staticClass:"title"},[t._v("文件列表")]),t._v(" "),i("div",{staticClass:"tab-tit clear"},t._l(t.files,function(e,n){return i("TabTit",{key:e.filename,staticClass:"fl",attrs:{item:e,index:n,selected:t.selected,hideReadGist:t.hideReadGist},on:{changeTab:function(e){t.onChangeTab(n)}}})})),t._v(" "),t._l(t.files,function(e,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected===n,expression:"selected === index"}],key:n},[i("div",{staticClass:"form-item"},[i("b",[t._v(t._s(e.filename))])]),t._v(" "),i("div",{staticClass:"form-item"},[t._v("\n      "+t._s(e.content)+"\n    ")])])}),t._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.hideReadGist,expression:" !hideReadGist"}],attrs:{size:"small"},on:{click:function(e){t.$emit("editGist")}}},[t._v("编辑")])],2)},staticRenderFns:[]};var mt={name:"Gist",components:{EditGist:i("VU/8")(dt,ut,!1,function(t){i("N6nI")},"data-v-6246a15c",null).exports,ReadGist:i("VU/8")(ht,ft,!1,function(t){i("UEdy")},"data-v-f0542242",null).exports,Load:p},data:function(){return{id:this.$route.query.id,hideReadGist:!1,hideTab:!0,gistChanged:!1,disabledSave:!1,hideLoad:!1,files:{},activeName:"",selected:0,description:""}},beforeRouteUpdate:function(t,e,i){console.log(t),this.gistChanged?(i(!1),window.confirm("请编辑完成")):(this.hideLoad=!1,this.getFiles(t.query.id),this.id=t.query.id,i())},mounted:function(){var t=this;this.getFiles(this.id),o.$on("goReadGist",function(){t.hideReadGist=!1})},methods:{getFiles:function(t){var e=this;r.a.get("https://api.github.com/gists/"+t,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){e.hideLoad=!0,e.description=t.data.description,e.files=U()(t.data.files),e.files.forEach(function(t){t.oldname=t.filename}),e.activeName=e.files[0].filename}).catch()},onEditGist:function(){this.hideReadGist=!0}}},pt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Load",{attrs:{hideLoad:t.hideLoad}}),t._v(" "),i("EditGist",{class:{hide:!t.hideReadGist},attrs:{hideReadGist:t.hideReadGist,description:t.description,id:t.id,files:t.files}}),t._v(" "),i("ReadGist",{class:{hide:t.hideReadGist||!t.hideLoad},attrs:{hideReadGist:t.hideReadGist,description:t.description,files:t.files,id:t.id},on:{editGist:t.onEditGist}})],1)},staticRenderFns:[]};var vt=i("VU/8")(mt,pt,!1,function(t){i("GV+B")},"data-v-72ebede7",null).exports,gt={name:"ListItem",props:["item","index"],mounted:function(){o.$on("defaultTab",function(t){console.log(t)})},methods:{deleteCurrentGist:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.a.delete("https://api.github.com/gists/"+t,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(i){console.log(i),e.$message({type:"success",message:"删除成功!"}),o.$emit("deletePageGist",t)}).catch()}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},_t={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{on:{click:function(e){t.$emit("changeCurrent",t.index)}}},[i("router-link",{attrs:{to:{path:"/gists/gist",query:{id:t.item.id}}}},[i("span",{staticClass:"item-desc"},[t._v(t._s(t.item.description)+" ")])]),t._v(" "),i("span",{staticClass:"item-delete fr",on:{click:function(e){t.deleteCurrentGist(t.item.id)}}},[i("i",{staticClass:"el-icon-delete"})])],1)},staticRenderFns:[]};var bt={name:"List",components:{ListItem:i("VU/8")(gt,_t,!1,function(t){i("Manj")},"data-v-70c620c0",null).exports},data:function(){return{list:[],tabs:[],fileNumber:"",current:0,links:{},pageSize:0,total:0}},mounted:function(){this.pageSize=15,this.getCurrentPage("https://api.github.com/gists?page=1&per_page="+this.pageSize,function(){var t=this;if(this.links.hasOwnProperty("last")){var e=this.links.last.match(/.+page=(\d+)&.+/);this.total=this.pageSize*parseInt(e[1])}o.$on("deletePageGist",function(e){t.list=t.list.filter(function(t){return t.id!==e})}),o.$on("updateList",this.onUpdateList),o.$on("addListGist",function(e){t.list.unshift({id:e.id,description:e.description})})})},methods:{getCurrentPage:function(t,e){var i=this;r.a.get(t,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){i.list=t.data;var n=i,s=t.headers.link.split(",");s?s.forEach(function(t){var e=t.match(/<(.+)>; rel="(.+)"/);n.$set(n.links,e[2],e[1])}):i.pageSize=i.list.length,i.$router.push({path:"/gists/gist",query:{id:i.list[0].id}}),"function"==typeof e&&e.call(n)}).catch()},handleCurrentChange:function(t){var e="https://api.github.com/gists?page=num&per_page="+this.pageSize;this.getCurrentPage(e.replace(/num/,t))},onChangeCurrent:function(t){this.current=t,o.$emit("goReadGist")},onUpdateList:function(t){this.list.forEach(function(e){e.id===t.id&&(e.description=t.description,e.files=t.files)})}}},Ct={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"nav"},t._l(t.list,function(e,n){return i("ListItem",{tag:"li",class:{active:t.current===n},attrs:{item:e,index:n},on:{changeCurrent:t.onChangeCurrent}})})),t._v(" "),i("div",{staticClass:"pager"},[i("el-pagination",{attrs:{layout:"prev,pager,next","page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var kt=i("VU/8")(bt,Ct,!1,function(t){i("SWTC")},"data-v-1cedf22c",null).exports,xt={name:"Gists",components:{List:kt}},wt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"clear full"},[e("div",{staticClass:"nav-box"},[e("h4",[this._v("gist列表\n        "),e("span",{staticClass:"fr gistAdd"},[e("router-link",{attrs:{to:"/gists/addGist"}},[e("i",{staticClass:"el-icon-circle-plus-outline"})])],1)]),this._v(" "),e("List")],1),this._v(" "),e("div",{staticClass:"tab-box"},[e("router-view")],1)])])},staticRenderFns:[]};var yt=i("VU/8")(xt,wt,!1,function(t){i("IPm2")},"data-v-78c9ca46",null).exports,$t={name:"AddGist",components:{TabContent:ct,TabTit:ot},data:function(){return{files:[],description:"",filename:"",content:"",note:"",disabled:!1,addHandle:!1,selected:0,current:0}},computed:{hideDeleteIcon:function(){return this.files&&1===this.files.length}},mounted:function(){var t="file_"+this.files.length+1;this.files.push({filename:t,content:this.content})},methods:{isDesNull:function(){""!==this.description?this.note="":this.note="详情描述不能为空"},onDescription:function(){this.isDesNull()},onChangeTab:function(t){this.selected=t},addFiles:function(){this.files.push({filename:this.filename,content:this.content}),this.addHandle=!0,this.selected=this.files.length-1},deleteFile:function(t){t>0&&this.files.splice(t,1)},saveGist:function(){var t=this;this.isDesNull();var e={public:!0};e.description=this.description,e.files={},this.files.forEach(function(t){e.files[t.filename]={content:t.content}}),console.log(e),d.post("/gists",e).then(function(e){t.disabled=!0,o.$emit("addListGist",{id:e.data.id,description:e.data.description}),t.open()}).catch()},open:function(){this.$message({message:"恭喜你，添加成功",type:"success"})}}},Gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addForm"},[i("div",[i("h3",{staticClass:"title"},[t._v("详情描述")]),t._v(" "),i("el-input",{attrs:{type:"textarea",placeholder:"请输入详情描述",autosize:""},on:{change:t.onDescription},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),i("span",[t._v(t._s(t.note))])],1),t._v(" "),i("h3",{staticClass:"title"},[t._v("\n    文件列表\n    "),i("span",{staticClass:"fr addFile",on:{click:t.addFiles}},[i("i",{staticClass:"el-icon-circle-plus-outline"})])]),t._v(" "),i("div",{staticClass:"tab-tit clear"},t._l(t.files,function(e,n){return i("TabTit",{key:e.filename,staticClass:"fl",attrs:{item:e,index:n,selected:t.selected},on:{changeTab:function(e){t.onChangeTab(n)}}})})),t._v(" "),t._l(t.files,function(e,n){return i("div",{key:n},[i("TabContent",{directives:[{name:"show",rawName:"v-show",value:t.selected===n,expression:"selected === index"}],attrs:{addHandle:t.addHandle,files:t.files,item:e}})],1)}),t._v(" "),i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary",size:"medium",disabled:t.disabled},on:{click:t.saveGist}},[t._v("保存")])],1)],2)},staticRenderFns:[]};var Rt=i("VU/8")($t,Gt,!1,function(t){i("dqpj")},"data-v-7ab16a4a",null).exports;n.default.use(b.a),n.default.use(C.a);var Ft=new b.a({routes:[{path:"/gists",name:"Gists",component:yt,children:[{path:"gist",name:"Gist",component:vt},{path:"addGist",name:"AddGist",component:Rt}]},{path:"/login",name:"Login",component:st},{path:"/list",name:"List",component:kt},{path:"/object",name:"Object",component:it},{path:"/test",name:"Test",component:W},{path:"/issue",name:"Issue",component:q},{path:"/read",name:"Read",component:L},{path:"/edit",name:"Edit",component:B},{path:"/add",name:"Add",component:F}]}),It=i("zL8q");i("tvR6");n.default.prototype.$ELEMENT={size:"small",zIndex:3e3},n.default.use(It.Button),n.default.use(It.Input),n.default.use(It.Select),n.default.use(It.Option),n.default.use(It.Radio),n.default.use(It.Table),n.default.use(It.TableColumn),n.default.use(It.Row),n.default.use(It.Col),n.default.use(It.Form),n.default.use(It.FormItem),n.default.use(It.Pagination),n.default.use(It.Tabs),n.default.use(It.TabPane),n.default.prototype.$confirm=It.MessageBox.confirm,n.default.prototype.$message=It.Message,n.default.config.productionTip=!1,new n.default({el:"#app",router:Ft,components:{App:_},template:"<App/>",mounted:function(){}})},"O/8J":function(t,e){},OLK2:function(t,e){},QVcd:function(t,e){},SWTC:function(t,e){},UEdy:function(t,e){},Y6mS:function(t,e){},ZsaA:function(t,e){},dqpj:function(t,e){},fk4z:function(t,e){},hSnX:function(t,e){},hlr8:function(t,e){},iD37:function(t,e){},rn6Z:function(t,e){},sPlM:function(t,e){},tvR6:function(t,e){},wNlq:function(t,e){},wRHa:function(t,e){},xptx:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ea7eb9847badba86a712.js.map