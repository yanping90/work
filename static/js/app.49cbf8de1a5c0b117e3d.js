webpackJsonp([1],{"0BLv":function(e,t){},"7w/U":function(e,t){},"8mmt":function(e,t){},"Jy+X":function(e,t){},KTQp:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),s=i("OAwv"),a=i.n(s),o=new n.default({}),l=i("mtWM"),r=i.n(l),c=r.a.create({baseURL:"https://api.github.com",timeout:1e4});c.interceptors.request.use(function(e){return e.headers.Authorization="token "+localStorage.getItem("token"),e}),c.interceptors.response.use(function(e){return console.log(e),e},function(e){});var d=c,u={name:"UserBar",data:function(){return{userName:"",photo:"",hideUserBar:!0}},mounted:function(){o.$on("gotAccessToken",this.loadUser)},methods:{userExit:function(){this.hideUserBar=!0,this.$router.push({path:"/"}),o.$emit("removeToken")},loadUser:function(){var e=this;d.get("/user").then(function(t){console.log(t),e.hideUserBar=!1,e.userName=t.data.login,e.photo=t.data.avatar_url}).catch()}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tit",class:{hide:e.hideUserBar}},[i("span",{staticClass:"photoImg"},[i("img",{attrs:{src:e.photo}})]),e._v(" "),i("b",[e._v(e._s(e.userName))]),e._v(" "),i("span",{staticClass:"gistAdd"},[i("router-link",{attrs:{to:"/gists/addGist"}},[i("el-button",{attrs:{size:"mini",round:""}},[e._v("添加 Gist")])],1)],1),e._v(" "),i("span",{staticClass:"quit"},[i("a",{on:{click:e.userExit}},[e._v("退出")])])])},staticRenderFns:[]};var f=i("VU/8")(u,h,!1,function(e){i("utGY")},"data-v-fdc0dca2",null).exports,m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:{loading:!0,hide:this.hideLoad}},[t("i",{staticClass:"el-icon-loading"}),this._v(" "),t("span",[this._v("页面加载中")])])},staticRenderFns:[]};var p=i("VU/8")({name:"Load",props:["hideLoad"],data:function(){return{}}},m,!1,function(e){i("wRHa")},"data-v-5559ee1c",null).exports,v={name:"App",components:{UserBar:f,Load:p},data:function(){return{loginUrl:"https://github.com/login/oauth/authorize?client_id=d327e486430e4b05f07b&scope=gist,user&redirect_uri=https://joyfunphp.herokuapp.com/github/oauth/gists",token:"",queryObj:{}}},computed:{hideLogin:function(){return""!==this.token||void 0!==this.queryObj.code},hideLoad:function(){return""!==this.token||void 0===this.queryObj.code}},mounted:function(){var e=this;o.$on("removeToken",function(){localStorage.removeItem("token"),e.token="",e.queryObj={}}),null===localStorage.getItem("token")?this.token="":""!==localStorage.getItem("token")&&(o.$emit("gotAccessToken"),this.token=localStorage.getItem("token"),this.$router.push("/gists")),this.queryObj=a.a.parse(location.search),void 0!==this.queryObj.code&&d.get("https://joyfunphp.herokuapp.com/github/access/",{params:{client_id:"d327e486430e4b05f07b",code:this.queryObj.code}}).then(function(t){t.data.access_token?(localStorage.setItem("token",t.data.access_token),e.token=t.data.access_token,e.$router.push("gists"),o.$emit("gotAccessToken")):alert("code过期")}).catch()}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("UserBar"),this._v(" "),t("div",{class:{githubBtn:!0,hide:this.hideLogin}},[t("a",{attrs:{href:this.loginUrl}},[this._v("\n      使用github帐号登录\n    ")])]),this._v(" "),t("Load",{attrs:{hideLoad:this.hideLoad}}),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var b=i("VU/8")(v,g,!1,function(e){i("Sg/W")},null,null).exports,_=i("/ocq"),C=i("NYxO"),k={name:"File",props:["files","file","index"],data:function(){return{desContent:"请输入content",desFilename:"请输入文件名",note:""}},watch:{"file.filename":function(e){this.files.filter(function(t){return t.filename===e}).length>1?this.note="文件名重复，请重复填写":this.note="",console.log(this.files)}}},x={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-input",{attrs:{placeholder:e.desFilename},model:{value:e.file.filename,callback:function(t){e.$set(e.file,"filename",t)},expression:"file.filename"}}),e._v(" "),i("span",{staticClass:"note"},[e._v(e._s(e.note))]),i("br"),e._v(" "),i("el-input",{attrs:{type:"textarea",placeholder:e.desContent},model:{value:e.file.content,callback:function(t){e.$set(e.file,"content",t)},expression:"file.content"}})],1)},staticRenderFns:[]};var $=i("VU/8")(k,x,!1,function(e){i("iD37")},"data-v-c7d4e970",null).exports,w={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{attrs:{size:"mini"},on:{click:this.addFile}},[this._v("添加文件")])},staticRenderFns:[]};var y=i("VU/8")({name:"addFilename",props:["files"],data:function(){return{filename:"",content:""}},methods:{addFile:function(){this.files.push({filename:this.filename,content:this.content})}}},w,!1,function(e){i("O/8J")},"data-v-7fe6e450",null).exports,F={name:"Add",components:{File:$,AddFilename:y},data:function(){return{form:{desPlace:"请输入description",public:"true",description:"",filename:"",content:"",note:""},ps:["true","false"],isDisabled:!1,files:[]}},watch:{"form.description":function(e,t){0===e.length?this.form.note="详情描述不能为空":this.form.note=""}},methods:{addGist:function(){var e=this;if(0!==this.form.description.length){this.form.note="";var t={description:this.form.description,public:this.form.public};console.log(t),t.files={};for(var i=0;i<this.files.length;i++){var n=this.files[i].filename;t.files[n]={content:this.files[i].content}}r.a.post("https://api.github.com/gists",t,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){console.log(t),e.isDisabled=!0,window.confirm("创建成功")}).catch()}else this.form.note="详情描述不能为空"}}},T={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"comWidth"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"详情描述"}},[i("el-input",{attrs:{placeholder:e.form.desPlace},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),i("span",{staticClass:"note"},[e._v(e._s(e.form.note))])],1),e._v(" "),i("el-form-item",{attrs:{label:"是否公共"}},[i("el-select",{model:{value:e.form.public,callback:function(t){e.$set(e.form,"public",t)},expression:"form.public"}},e._l(e.ps,function(e){return i("el-option",{key:e,attrs:{value:e}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"文件名称"}},[e._l(e.files,function(t,n){return i("File",{key:n,attrs:{file:t,files:e.files,index:n}})}),e._v(" "),i("AddFilename",{attrs:{files:e.files}})],2),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"medium",disabled:e.isDisabled},on:{click:e.addGist}},[e._v("立即创建")]),e._v(" "),i("el-button",{staticClass:"returnGist",attrs:{size:"medium"}},[i("router-link",{attrs:{to:"/read"}},[e._v("返回")])],1)],1)],1)],1)},staticRenderFns:[]};var E=i("VU/8")(F,T,!1,function(e){i("hlr8")},"data-v-ed482d6a",null).exports,I=i("vbIr"),L=i.n(I),U={name:"Read",data:function(){return{gists:[],links:{},pager:[],pageCount:1,selected:0,currentValue:"",getPage:function(e,t){var i=this;r.a.get(e,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){i.gists=e.data,i.links={};var n=i;e.headers.link.split(",").forEach(function(e){var t=e.match(/[<](.+)[>]; rel="(.+)"/);n.$set(n.links,t[2],t[1])}),"function"==typeof t&&t.call(n)}).catch()}}},filters:{time:function(){return L()("YYYYMMDD HH:mm:ss")}},mounted:function(){this.getPage("https://api.github.com/gists?page=1&per_page=4",function(){this.pageCount=parseInt(this.links.last.match(/\d/)[0]);for(var e=1;e<=this.pageCount;e++)this.pager.push({count:e});this.currentValue=2})},methods:{changePage:function(){if(this.currentValue=parseInt(this.currentValue),this.currentValue<=this.pageCount&&this.currentValue>=0){this.getPage("https://api.github.com/gists?page=num&per_page=4".replace(/num/,this.currentValue),function(){this.selected=this.currentValue-1})}else this.currentValue=this.pageCount;console.log(this.currentValue)},currentPage:function(e){this.getPage("https://api.github.com/gists?page=num&per_page=4".replace(/num/,e+1),function(){this.selected=e,e<this.pageCount-1?this.currentValue=e+2:this.currentValue=this.pageCount})},prevPage:function(){this.getPage(this.links.prev,function(){})},nextPage:function(){this.getPage(this.links.next,function(){})},deleteAll:function(){var e=this;this.multipleSelection.forEach(function(t){r.a.delete("https://api.github.com/gists/"+t.id,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(i){e.gists=e.gists.filter(function(e){return e.id!==t.id})}).catch()})},deleteGist:function(e){var t=this,i=e.target.id;r.a.delete("https://api.github.com/gists/"+i,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){t.gists=t.gists.filter(function(e){return e.id!==i}),window.confirm("删除成功")}).catch()},handleSelectionChange:function(e){this.multipleSelection=e}}},D={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"comWidth"},[i("div",{staticClass:"addLink"},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.deleteAll}}),e._v(" "),i("router-link",{attrs:{to:"/add"}},[i("el-button",{attrs:{type:"primary",circle:""}},[i("i",{staticClass:"el-icon-circle-plus-outline"})])],1)],1),e._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.gists,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection"}}),e._v(" "),i("el-table-column",{attrs:{label:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("time")(t.row.created_at)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"url",label:"链接地址",width:"500"}}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"详情描述","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{attrs:{to:{name:"Edit",query:{id:t.row.id}}}},[i("i",{staticClass:"el-icon-edit"})]),e._v(" "),i("i",{staticClass:"el-icon-delete",attrs:{id:t.row.id},on:{click:e.deleteGist}})]}}])})],1),e._v(" "),i("div",{staticClass:"page-box"},[i("button",{staticClass:"prevBtn",class:[{mouseDisabled:!this.links.hasOwnProperty("prev")},{nextBtn:!0}],attrs:{disabled:!this.links.hasOwnProperty("prev")},on:{click:e.prevPage}},[i("i",{staticClass:"el-icon-arrow-left"})]),e._v(" "),i("ul",{staticClass:"page"},e._l(e.pager,function(t,n){return i("li",{class:{active:e.selected===n},on:{click:function(t){e.currentPage(n)}}},[e._v(e._s(t.count))])})),e._v(" "),i("button",{class:[{mouseDisabled:!this.links.hasOwnProperty("next")},{nextBtn:!0}],attrs:{disabled:!this.links.hasOwnProperty("next")},on:{click:e.nextPage}},[i("i",{staticClass:"el-icon-arrow-right"})]),e._v(" "),i("span",{staticClass:"fl totalPage"},[e._v("共"+e._s(e.pageCount)+"页")]),e._v(" "),i("div",{staticClass:"jump"},[i("span",[e._v("跳至")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],attrs:{type:"text"},domProps:{value:e.currentValue},on:{input:function(t){t.target.composing||(e.currentValue=t.target.value)}}}),e._v(" "),i("span",[e._v("页")]),e._v(" "),i("button",{on:{click:function(t){e.changePage(e.currentValue)}}},[e._v("跳转")])])])],1)},staticRenderFns:[]};var V=i("VU/8")(U,D,!1,function(e){i("sPlM")},"data-v-1498ecde",null).exports,R=i("gRE1"),S=i.n(R),z={name:"fileEdit",props:["files","index","file","deleteItem"],components:{File:$},data:function(){return{}},methods:{deleteFile:function(e){console.log(e),void 0!==this.files[e].oldname&&(this.deleteItem.push(this.files[e].oldname),console.log(this.deleteItem)),this.files.splice(e,1)}}},G={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("File",{attrs:{file:e.file,files:e.files,index:e.index}}),e._v(" "),i("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(t){e.deleteFile(e.index)}}},[e._v("删除文件")])],1)},staticRenderFns:[]};var P={name:"Edit",components:{AddFilename:y,File:$,FileEdit:i("VU/8")(z,G,!1,function(e){i("7w/U")},"data-v-42f637b0",null).exports},data:function(){return{form:{description:""},ps:["true","false"],selectId:this.$route.query.id,files:[],oldName:[],deleteItem:[]}},mounted:function(){var e=this;r.a.get("https://api.github.com/gists/"+this.selectId,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){e.form.description=t.data.description,e.files=S()(t.data.files),e.files.forEach(function(e){e.oldname=e.filename}),console.log(e.files)}).catch()},methods:{editGist:function(){var e={};e.description=this.form.description,e.files={},this.files.forEach(function(t){void 0!==t.oldname?t.oldname!==t.filename?e.files[t.oldname]={filename:t.filename,content:t.content}:e.files[t.oldname]={content:t.content}:e.files[t.filename]={content:t.content}});var t=this;t.deleteItem.forEach(function(i){void 0===t.files.find(function(e){return e.filename===i})&&(e.files[i]=null)}),r.a.patch("https://api.github.com/gists/"+this.selectId,e,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){console.log(e),window.confirm("更新成功")}).catch(function(e){console.log(e)})}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"comWidth"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"详情描述",prop:"description"}},[i("el-input",{attrs:{placeholder:e.form.desPlace},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"文件名称"}},[e._l(e.files,function(t,n){return i("FileEdit",{key:n,attrs:{file:t,files:e.files,index:n,deleteItem:e.deleteItem}})}),e._v(" "),i("AddFilename",{attrs:{files:e.files}})],2),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.editGist}},[e._v("更新内容")]),e._v(" "),i("el-button",{staticClass:"returnGist",attrs:{size:"medium"}},[i("router-link",{attrs:{to:"/read"}},[e._v("返回")])],1)],1)],1)],1)},staticRenderFns:[]};var N=i("VU/8")(P,A,!1,function(e){i("QVcd")},"data-v-6d908ded",null).exports,H={name:"Issue",data:function(){return{lists:[]}},mounted:function(){var e=this;r.a.get(" https://api.github.com/repos/yanping90/js/issues").then(function(t){console.log(t),e.lists=t.data}).catch()},filters:{time:function(){return L()("YYYY-MM-DD HH:mm")}}},O={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"comWidth"},[i("ul",{staticClass:"list"},e._l(e.lists,function(t){return i("li",[i("span",{staticClass:"title"},[e._v(e._s(t.title))]),e._v(" "),i("span",{staticClass:"time"},[e._v(e._s(e._f("time")(t.created_at)))]),e._v(" "),i("span",{staticClass:"edit"},[i("router-link",{attrs:{to:"issue/edit"}},[e._v("编辑")])],1)])}))])},staticRenderFns:[]};var W=i("VU/8")(H,O,!1,function(e){i("OLK2")},"data-v-2a1bb9d5",null).exports,q={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v(this._s(this.list.name))])},staticRenderFns:[]};var B={name:"Test",components:{Example:i("VU/8")({name:"Example",props:["list"],data:function(){return{}}},q,!1,function(e){i("rn6Z")},"data-v-79668038",null).exports},data:function(){return{size:"12",description:"",lists:[{name:"js",id:0,content:"JavaScript 是世界上最流行的脚本语言。JavaScript 是属于 web 的语言，它适用于 PC、笔记本电脑、平板电脑和移动电话。JavaScript 被设计为向 HTML 页面增加交互性。"},{name:"css",id:1,content:"HTML 指超文本标签语言。HTML 是通向 WEB 技术世界的钥匙。在 W3School 的 HTML 教程中，您将学习如何使用 HTML 来创建站点。"},{name:"HTML 教程",id:2,content:"在本教程中，你将学习如何使用 HTML 来创建站点。HTML 很容易学习！你会喜欢它的！"}]}},methods:{addGist:function(){r.a.post("https://api.github.com/gists",{description:this.description,files:{b:{content:"b"}}},{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){console.log(e.data)}).catch()},testBtn:function(e){console.log(e)},sizeFont:function(){this.size++,console.log(this.size)}}},M={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",this._l(this.lists,function(e,i){return t("Example",{key:i,attrs:{list:e}})}))},staticRenderFns:[]};var j=i("VU/8")(B,M,!1,function(e){i("wNlq")},"data-v-78a55876",null).exports,Y=i("woOf"),J=i.n(Y),K=i("fZjL"),Z=i.n(K),Q=i("W3Iv"),X=i.n(Q),ee={name:"Object",data:function(){return{data:""}},mounted:function(){var e={name:"lily",age:18,sex:"女"};console.log(e),this.data=X()(e),console.log(Z()(e)),console.log(S()(e));for(var t in Array.prototype.set="",Array.prototype.get="",[1,2,3,4])console.log(t);var i={a:1,b:2,c:3},n=J()({c:1,d:10},i);console.log(n);var s=J()({},i);console.log(s);var a=[0,2,3,4,4,0,2];for(t=0;t<a.length;t++)a.indexOf(a[t])!=a.lastIndexOf(a[t])&&a.splice(t,1);console.log(a)}},te={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  "+this._s(this.data)+"\n")])},staticRenderFns:[]};var ie=i("VU/8")(ee,te,!1,function(e){i("Y6mS")},"data-v-c46c222e",null).exports,ne={render:function(){var e=this.$createElement;return(this._self._c||e)("a",{attrs:{href:"https://github.com/login/oauth/authorize?client_id=d327e486430e4b05f07b&scope=gist,user"}},[this._v("\n  使用github帐号登录\n")])},staticRenderFns:[]};var se=i("VU/8")({name:"Login",data:function(){return{}},mounted:function(){},methods:{}},ne,!1,function(e){i("hSnX")},"data-v-9fd6900a",null).exports,ae={name:"TabTit",props:["item","index","selected","deleteVisible","repeatable"],data:function(){return{isHnputHover:!1,note:"",editableTit:!1}},computed:{deletable:function(){return this.item.deleted&&""===this.item.filename},editable:function(){return this.item.oldname!==this.item.filename},addable:function(){return""===this.item.oldname}},watch:{repeatable:function(){this.repeatable&&this.$message.error("文件名字不能重复")}},mounted:function(){var e=this;o.$on("showEditName",function(){e.editableTit=!1})},methods:{showEditTit:function(){this.editableTit=!0,this.changeWidth()},deleteFiles:function(e){this.$set(this.item,"deleted",!0),this.$set(this.item,"filename",""),o.$emit("onDeleteFiles",e)},changeTab:function(e){this.$emit("onchangeTab",e)},onNameChanged:function(){this.editableTit=!1,this.$set(this.item,"editable",!0),o.$emit("onNameChangedHandle",{deletable:this.deletable,editable:this.editable}),o.$emit("repeatFilename",this.item.filename)},changeWidth:function(){this.$refs.inputWidth.style.width=this.$refs.widthName.offsetWidth+20+"px"}}},oe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"tabTit",class:{hide:e.item.deleted,active:e.selected===e.index}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.editableTit,expression:"!editableTit"}],staticClass:"fileName",on:{dblclick:e.showEditTit}},[e._v(e._s(e.item.filename))]),e._v(" "),i("span",{ref:"widthName",staticClass:"nameWidth"},[e._v(e._s(e.item.filename))]),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:e.editableTit,expression:"editableTit"},{name:"model",rawName:"v-model",value:e.item.filename,expression:"item.filename"}],ref:"inputWidth",staticClass:"inputHover",attrs:{type:"text"},domProps:{value:e.item.filename},on:{change:e.onNameChanged,click:function(t){e.changeTab(e.index)},keydown:e.changeWidth,focus:e.changeWidth,input:function(t){t.target.composing||e.$set(e.item,"filename",t.target.value)}}}),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:e.deleteVisible,expression:"deleteVisible"}],staticClass:"el-icon-delete",on:{click:function(t){e.deleteFiles(e.index)}}})])},staticRenderFns:[]};var le=i("VU/8")(ae,oe,!1,function(e){i("tnOc")},"data-v-7aa288fe",null).exports,re=i("OEdS"),ce=i.n(re),de=(i("0BLv"),{name:"File",props:["item","index"],data:function(){return{editContent:!1}},computed:{highlightedContent:function(){if(this.item.content)return this.item.language?ce.a.highlight(this.item.content,ce.a.languages[this.item.language.toLocaleLowerCase()],this.item.language.toLocaleLowerCase()):this.item.content}},mounted:function(){var e=this;this.item.content||(this.editContent=!0),o.$on("changeEditContent",function(){e.editContent=!1}),o.$on("changeContent",function(){e.item.content||(e.editContent=!0)}),o.$on("showFileDetail",function(){e.editContent=!1})},methods:{onEditContent:function(){this.editContent=!0,o.$emit("changeSave")},contentChanged:function(e){this.editContent=!0,this.$set(this.item,"editable",!0),o.$emit("onContentChanged",e)}}}),ue={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preContent"},[i("pre",{directives:[{name:"show",rawName:"v-show",value:!e.editContent,expression:"!editContent"}],on:{dblclick:e.onEditContent}},[e._v("      "),i("div",{domProps:{innerHTML:e._s(e.highlightedContent)}}),e._v("\n    ")]),e._v(" "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.editContent,expression:"editContent"}],ref:"contentHeight",attrs:{type:"textarea",autosize:{minRows:20},placeholder:"请输入文件内容"},on:{change:function(t){e.contentChanged(e.index)}},model:{value:e.item.content,callback:function(t){e.$set(e.item,"content",t)},expression:"item.content"}})],1)},staticRenderFns:[]};var he=i("VU/8")(de,ue,!1,function(e){i("8mmt")},null,null).exports,fe={name:"Gist",components:{Load:p,TabTit:le,File:he},data:function(){return{id:this.$route.query.id,hideLoad:!1,hideDetails:!0,repeatable:!1,activeName:"",selected:0,newFileIndex:0,description:"",files:[],fileCRUD:{}}},beforeRouteUpdate:function(e,t,i){var n=this;0!==Z()(this.fileCRUD).length?this.$confirm("检测到未保存的内容，是否在离开页面前保存修改？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改"}).then(function(){n.onUpdateItem(),n.fileCRUD={},n.id=e.query.id,n.getFiles(n.id),o.$emit("addWidth"),i()}).catch(function(t){n.$message({type:"info",message:"cancel"===t?"放弃保存并离开页面":"停留在当前页面"}),n.fileCRUD={},n.hideLoad=!1,n.id=e.query.id,n.getFiles(n.id),i()}):(this.hideLoad=!1,this.fileCRUD={},this.id=e.query.id,this.getFiles(this.id),i())},computed:{savable:function(){return this.fileCRUD.deletable||this.fileCRUD.editable||this.fileCRUD.addable},deleteVisible:function(){return this.files.filter(function(e){return!e.deleted}).length>1}},mounted:function(){var e=this;o.$on("hideGistDetails",function(){e.hideLoad=!0,e.hideDetails=!0}),o.$on("showDetails",function(){e.hideLoad=!1,e.hideDetails=!0}),this.getFiles(this.id),o.$on("onNameChangedHandle",function(t){e.fileCRUD=t}),o.$on("onContentChanged",function(){e.$set(e.fileCRUD,"editable",!0)}),o.$on("onDeleteFiles",function(t){e.$set(e.fileCRUD,"deletable",!0);for(var i=e.files,n=0;n<i.length;n++)if(void 0===i[n].deleted){e.selected=n;break}}),o.$on("defaultSelected",function(){e.selected=0}),o.$on("repeatFilename",function(t){e.files.filter(function(e){return e.filename===t}).length>1&&(e.repeatable=!0)})},methods:{getFiles:function(e){var t=this;r.a.get("https://api.github.com/gists/"+e,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){t.hideLoad=!0,t.hideDetails=!1,t.description=e.data.description,t.files=S()(e.data.files),t.files.forEach(function(e){e.oldname=e.filename}),t.activeName=t.files[0].filename}).catch()},onChangeDesc:function(){this.$set(this.fileCRUD,"editable",!0)},onChangeTabHandle:function(e){this.selected=e,o.$emit("changeContent",e)},addFile:function(){var e="file_"+this.newFileIndex++;this.files.push({filename:e,content:""}),this.selected=this.files.length-1,o.$emit("showEditContent")},onUpdateItem:function(){var e=this,t={};t.description=this.description,this.description&&0===this.description.length?alert("详情描述不能为空"):(t.files={},this.files.forEach(function(e){void 0!==e.oldname?(e.editable&&(t.files[e.oldname]={filename:e.filename,content:e.content}),e.deleted&&(t.files[e.oldname]=null)):t.files[e.filename]={content:e.content}}),console.log(t),r.a.patch("https://api.github.com/gists/"+this.id,t,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(t){console.log(t),e.files=S()(t.data.files),e.files.forEach(function(e){e.oldname=e.filename}),e.open(),o.$emit("updateList",{id:e.id,files:e.files,description:e.description}),o.$emit("changeEditContent"),e.fileCRUD={},e.selected=0}).catch())},open:function(){this.$message({message:"恭喜你，保存成功",type:"success"})}}},me={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Load",{attrs:{hideLoad:e.hideLoad}}),e._v(" "),i("div",{class:{hide:e.hideDetails}},[i("el-input",{attrs:{type:"textarea",rel:"inputWidth",autosize:""},on:{change:e.onChangeDesc},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e._v(" "),i("div",{staticClass:"height20"}),e._v(" "),i("div",{staticClass:"tab-tit clear"},[e._l(e.files,function(t,n){return i("TabTit",{key:n,staticClass:"fl",attrs:{item:t,index:n,selected:e.selected,deleteVisible:e.deleteVisible,repeatable:e.repeatable},on:{onchangeTab:function(t){e.onChangeTabHandle(n)}}})}),e._v(" "),i("span",{staticClass:"gistAdd fl"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addFile}})])],2),e._v(" "),e._l(e.files,function(t,n){return i("File",{directives:[{name:"show",rawName:"v-show",value:e.selected===n,expression:"selected === index"}],key:n,attrs:{item:t,index:n}})}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.savable,expression:"savable"}],staticClass:"btn"},[i("el-button",{attrs:{type:"primary",size:"medium",disabled:!e.savable},on:{click:e.onUpdateItem}},[e._v("\n          保存\n        ")])],1)],2)],1)},staticRenderFns:[]};var pe=i("VU/8")(fe,me,!1,function(e){i("vYsm")},"data-v-50645fdb",null).exports,ve={name:"ListItem",props:["item","index"],data:function(){return{current:0,hideDeleteIcon:!0}},mounted:function(){o.$on("defaultTab",function(e){console.log(e)})},methods:{changeCurrent:function(e){this.$emit("changeCurrent",e),o.$emit("defaultSelected"),o.$emit("showGistDetails"),o.$emit("showEditName"),o.$emit("showFileDetail")},deleteCurrentGist:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.a.delete("https://api.github.com/gists/"+e,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(i){console.log(i),t.$message({type:"success",message:"删除成功!"}),o.$emit("deletePageGist",e)}).catch()}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},ge={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{on:{click:function(t){e.changeCurrent(e.index)}}},[i("router-link",{attrs:{to:{path:"/gists/gist",query:{id:e.item.id}}}},[i("span",{staticClass:"item-desc"},[e._v(e._s(e.item.description)+" ")])]),e._v(" "),i("span",{staticClass:"item-delete fr",on:{click:function(t){e.deleteCurrentGist(e.item.id)}}},[i("i",{staticClass:"el-icon-delete"})])],1)},staticRenderFns:[]};var be={name:"List",components:{ListItem:i("VU/8")(ve,ge,!1,function(e){i("ZWxT")},null,null).exports},data:function(){return{list:[],tabs:[],fileNumber:"",current:"",links:{},pageSize:0,total:0}},mounted:function(){this.$refs.navHeight.style.height=screen.availHeight-220+"px",this.pageSize=15,this.getCurrentPage("https://api.github.com/gists?page=1&per_page="+this.pageSize,function(){var e=this;if(this.links.hasOwnProperty("last")){var t=this.links.last.match(/.+page=(\d+)&.+/);this.total=this.pageSize*parseInt(t[1])}o.$on("deletePageGist",function(t){e.list=e.list.filter(function(e){return e.id!==t})}),o.$on("updateList",function(t){e.list.forEach(function(e){e.id===t.id&&(e.description=t.description,e.files=t.files)})}),o.$on("addListGist",function(t){e.list.unshift({id:t.id,description:t.description})})})},methods:{getCurrentPage:function(e,t){var i=this;r.a.get(e,{headers:{Authorization:"token "+localStorage.getItem("token")}}).then(function(e){i.list=e.data;var n=i,s=e.headers.link.split(",");s?s.forEach(function(e){var t=e.match(/<(.+)>; rel="(.+)"/);n.$set(n.links,t[2],t[1])}):i.pageSize=i.list.length,"function"==typeof t&&t.call(n)}).catch()},handleCurrentChange:function(e){this.current="",o.$emit("hideGistDetails");var t="https://api.github.com/gists?page=num&per_page="+this.pageSize;this.getCurrentPage(t.replace(/num/,e))},onChangeCurrent:function(e){this.current=e,o.$emit("showDetails")}}},_e={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ul",{ref:"navHeight",staticClass:"nav"},e._l(e.list,function(t,n){return i("ListItem",{tag:"li",class:{active:e.current===n},attrs:{item:t,index:n},on:{changeCurrent:e.onChangeCurrent}})})),e._v(" "),i("div",{staticClass:"pager"},[i("el-pagination",{attrs:{layout:"prev,pager,next","page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var Ce=i("VU/8")(be,_e,!1,function(e){i("htK6")},null,null).exports,ke={name:"Gists",components:{List:Ce},data:function(){return{hideGreet:!1}},mounted:function(){var e=this;o.$on("showGistDetails",function(){e.hideGreet=!0}),o.$on("hideGistDetails",function(){e.hideGreet=!1})}},xe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"full"},[t("div",{staticClass:"nav-box"},[t("List")],1),this._v(" "),t("div",{class:{greet:!0,hide:this.hideGreet}},[this._v("\n    想要看Gist详情，请点击左侧Gist标题\n  ")]),this._v(" "),t("div",{staticClass:"tab-box"},[t("router-view")],1)])},staticRenderFns:[]};var $e=i("VU/8")(ke,xe,!1,function(e){i("Jy+X")},"data-v-4d9b8ee0",null).exports,we={name:"AddGist",components:{TabTit:le,File:he},data:function(){return{files:[],description:"",note:"",selected:0,current:0,radioIndex:"1",newFileIndex:2,repeatable:!1,disabled:!1,addable:!0}},computed:{hideDeleteIcon:function(){return this.files&&1===this.files.length},deleteVisible:function(){return this.files.filter(function(e){return!e.deleted}).length>1}},mounted:function(){var e=this;o.$on("hideGistDetails",function(){e.hideLoad=!0,e.hideDetails=!0}),this.files.push({filename:"file_1",content:""}),o.$on("repeatFilename",function(t){e.files.filter(function(e){return e.filename===t}).length>1&&(e.repeatable=!0)}),o.$on("onDeleteFiles",function(t){for(var i=e.files,n=0;n<i.length;n++)if(void 0===i[n].deleted){e.selected=n;break}})},methods:{addFile:function(){this.addable=!0;var e="file_"+this.newFileIndex++;this.files.push({filename:e,content:""}),this.selected=this.files.length-1},onChangeTabHandle:function(e){this.selected=e},onChangeTab:function(e){this.selected=e},deleteFile:function(e){e>0&&this.files.splice(e,1)},changeDesc:function(){""!==this.description?this.note="":this.note="详情描述不能为空"},saveGist:function(){var e=this;if(""!==this.description){this.note="";var t={};"1"===this.radioIndex?t.public=!0:t.public=!1,t.description=this.description,t.files={},this.files.filter(function(e){return!e.deleted}).forEach(function(e){t.files[e.filename]={content:e.content}}),console.log(t),d.post("/gists",t).then(function(t){e.selected=0,e.addable=!1,o.$emit("changeEditContent"),o.$emit("addListGist",{id:t.data.id,description:t.data.description}),e.open(),e.$router.push({path:"/gists/gist",query:{id:t.data.id}})}).catch()}else this.note="详情描述不能为空"},open:function(){this.$message({message:"恭喜你，添加成功",type:"success"})}}},ye={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addForm"},[i("div",[i("el-input",{attrs:{type:"textarea",placeholder:"请输入详情描述",autosize:""},on:{change:e.changeDesc},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e._v(" "),i("span",[e._v(e._s(e.note))])],1),e._v(" "),i("div",{staticClass:"height20"}),e._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:e.radioIndex,callback:function(t){e.radioIndex=t},expression:"radioIndex"}},[e._v("public")]),e._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:e.radioIndex,callback:function(t){e.radioIndex=t},expression:"radioIndex"}},[e._v("secret")]),e._v(" "),i("div",{staticClass:"height20"}),e._v(" "),i("div",{staticClass:"tab-tit clear"},[e._l(e.files,function(t,n){return i("TabTit",{key:n,staticClass:"fl",attrs:{item:t,index:n,selected:e.selected,deleteVisible:e.deleteVisible,repeatable:e.repeatable},on:{onchangeTab:function(t){e.onChangeTabHandle(n)}}})}),e._v(" "),i("span",{staticClass:"gistAdd fl"},[i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addFile}})])],2),e._v(" "),e._l(e.files,function(t,n){return i("File",{directives:[{name:"show",rawName:"v-show",value:e.selected===n,expression:"selected === index"}],key:n,attrs:{item:t,index:n}})}),e._v(" "),i("div",{staticClass:"line20"}),e._v(" "),i("div",{staticClass:"btn"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addable,expression:"addable"}],attrs:{type:"primary",size:"medium",disabled:e.disabled},on:{click:e.saveGist}},[e._v("保存\n    ")])],1)],2)},staticRenderFns:[]};var Fe=i("VU/8")(we,ye,!1,function(e){i("KTQp")},"data-v-2c585286",null).exports;n.default.use(_.a),n.default.use(C.a);var Te=new _.a({routes:[{path:"/gists",name:"Gists",component:$e,children:[{path:"gist",name:"Gist",component:pe},{path:"addGist",name:"AddGist",component:Fe}]},{path:"/login",name:"Login",component:se},{path:"/list",name:"List",component:Ce},{path:"/object",name:"Object",component:ie},{path:"/test",name:"Test",component:j},{path:"/issue",name:"Issue",component:W},{path:"/read",name:"Read",component:V},{path:"/edit",name:"Edit",component:N},{path:"/add",name:"Add",component:E}]}),Ee=i("zL8q");i("tvR6");n.default.prototype.$ELEMENT={size:"small",zIndex:3e3},n.default.use(Ee.Button),n.default.use(Ee.Input),n.default.use(Ee.Select),n.default.use(Ee.Option),n.default.use(Ee.OptionGroup),n.default.use(Ee.Radio),n.default.use(Ee.Table),n.default.use(Ee.TableColumn),n.default.use(Ee.Row),n.default.use(Ee.Col),n.default.use(Ee.Form),n.default.use(Ee.FormItem),n.default.use(Ee.Pagination),n.default.use(Ee.Tabs),n.default.use(Ee.TabPane),n.default.prototype.$confirm=Ee.MessageBox.confirm,n.default.prototype.$message=Ee.Message,n.default.config.productionTip=!1,new n.default({el:"#app",router:Te,components:{App:b},template:"<App/>",mounted:function(){}})},"O/8J":function(e,t){},OLK2:function(e,t){},QVcd:function(e,t){},"Sg/W":function(e,t){},Y6mS:function(e,t){},ZWxT:function(e,t){},hSnX:function(e,t){},hlr8:function(e,t){},htK6:function(e,t){},iD37:function(e,t){},rn6Z:function(e,t){},sPlM:function(e,t){},tnOc:function(e,t){},tvR6:function(e,t){},utGY:function(e,t){},vYsm:function(e,t){},wNlq:function(e,t){},wRHa:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.49cbf8de1a5c0b117e3d.js.map